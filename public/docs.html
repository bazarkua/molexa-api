<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PubChem Educational Proxy API Documentation</title>
    
    <!-- Favicons and Web App Manifest -->
    <link rel="icon" type="image/x-icon" href="/pbulic/favicon.ico">
    <link rel="icon" type="image/png" sizes="16x16" href="/public/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/public/favicon-32x32.png">
    <link rel="apple-touch-icon" sizes="192x192" href="/public/android-chrome-192x192.png">
    <link rel="manifest" href="/public/site.webmanifest">
    <meta name="msapplication-TileColor" content="#007bff">
    <meta name="theme-color" content="#ffffff">
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Hero section with more space from navbar */
        .hero-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 6rem 0 4rem 0;
            margin-top: 76px;
        }
        
        /* Navbar styling for light theme */
        .navbar-light {
            background-color: #f8f9fa !important;
            border-bottom: 1px solid #e9ecef;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .navbar-light .navbar-brand {
            color: #2c3e50 !important;
            font-weight: 600;
            font-size: 1.25rem;
        }
        
        .navbar-light .navbar-brand:hover {
            color: #007bff !important;
        }
        
        /* Enhanced nav link styling for light theme */
        .navbar-light .navbar-nav .nav-link {
            color: #495057 !important;
            font-weight: 500;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            margin: 0 0.25rem;
            transition: all 0.3s ease;
        }
        
        .navbar-light .navbar-nav .nav-link:hover {
            color: #007bff !important;
            background-color: rgba(0, 123, 255, 0.1);
            transform: translateY(-1px);
        }
        
        .navbar-light .navbar-nav .nav-link.active {
            color: #007bff !important;
            background-color: rgba(0, 123, 255, 0.15);
            font-weight: 600;
        }
        
        /* GitHub star button styling */
        .github-star-btn {
            border: 1.5px solid #24292e !important;
            color: #24292e !important;
            font-weight: 600;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.3s ease;
            text-decoration: none !important;
            display: inline-flex;
            align-items: center;
            font-size: 0.875rem;
        }
        
        .github-star-btn:hover {
            background-color: #24292e !important;
            color: white !important;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(36, 41, 46, 0.2);
        }
        
        .github-star-btn i {
            font-size: 1rem;
        }
        
        /* Hero section button styling */
        .hero-section .btn {
            font-weight: 600;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: all 0.3s ease;
            text-decoration: none !important;
        }
        
        .hero-section .btn-outline-light:hover {
            background-color: white;
            color: #007bff;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
        }
        
        .hero-section .btn-light:hover {
            background-color: #f8f9fa;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .code-block {
            background-color: #f8f9fa;
            border-left: 4px solid #007bff;
            padding: 1rem;
            border-radius: 0.25rem;
        }
        .endpoint-card {
            border-left: 4px solid #28a745;
            transition: transform 0.2s;
        }
        .endpoint-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .method-badge {
            font-size: 0.8rem;
            padding: 0.25rem 0.5rem;
        }
        .nav-pills .nav-link.active {
            background-color: #007bff;
        }
        .citation-box {
            background-color: #e7f3ff;
            border-left: 4px solid #007bff;
            padding: 1.5rem;
            border-radius: 0.25rem;
        }
        .feature-icon {
            font-size: 2rem;
            color: #007bff;
        }
        .footer {
            background-color: #343a40;
            color: white;
            padding: 2rem 0;
        }
        .property-example {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 0.25rem;
            padding: 1rem;
            margin: 0.5rem 0;
        }
        
        /* Enhanced link styling for better readability */
        a {
            color: #0066cc;
            text-decoration: none;
            transition: color 0.2s ease;
        }
        a:hover {
            color: #004499;
            text-decoration: underline;
        }
        .text-primary a {
            color: inherit;
        }
        .citation-box a {
            color: #0066cc;
            font-weight: 500;
        }
        .citation-box a:hover {
            color: #004499;
        }
        .bg-light a {
            color: #0066cc;
        }
        .card a {
            color: #0066cc;
        }
        .list-unstyled a {
            color: #e9ecef;
            transition: color 0.2s ease;
        }
        .list-unstyled a:hover {
            color: #ffffff;
            text-decoration: none;
        }
        
        /* Code and pre elements styling */
        code {
            color: #0066cc;
            background-color: #f8f9fa;
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-size: 0.9em;
        }
        pre code {
            color: #333;
        }
        
        /* Enhanced button styling */
        .btn-outline-primary {
            border-color: #0066cc;
            color: #0066cc;
        }
        .btn-outline-primary:hover {
            background-color: #0066cc;
            border-color: #0066cc;
        }
        
        /* Badge styling improvements */
        .badge.bg-light {
            color: #333 !important;
        }
        
        /* Logo image styling - no background */
        .navbar-brand img {
            transition: transform 0.2s ease;
            filter: none;
            background: none !important;
            border-radius: 0;
            padding: 0;
        }
        
        .navbar-brand:hover img {
            transform: scale(1.05);
        }
        
        /* Remove background from all logo images */
        img[alt*="Logo"] {
            background: none !important;
            border-radius: 0 !important;
            padding: 0 !important;
        }
        
        /* Ensure all external links are readable */
        .text-decoration-none {
            color: #0066cc !important;
        }
        .text-decoration-none:hover {
            color: #004499 !important;
        }
        
        /* Smooth scrolling offset for fixed navbar */
        html {
            scroll-padding-top: 90px;
        }
        
        /* Additional spacing for sections */
        section {
            scroll-margin-top: 90px;
        }
        
        /* ===== NEW ANALYTICS STYLING ===== */
        .analytics-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 4rem 0;
        }
        
        .stat-card {
            transition: transform 0.2s;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .recent-request {
            border-left: 3px solid #007bff;
            background: white;
            margin-bottom: 0.5rem;
            padding: 0.75rem;
            border-radius: 0.375rem;
            transition: all 0.3s ease;
        }
        
        .recent-request.new {
            border-left-color: #28a745;
            box-shadow: 0 0 15px rgba(40, 167, 69, 0.3);
        }
        
        .activity-feed {
            height: 350px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 0.5rem;
            padding: 1rem;
        }
        
        .badge-request-type {
            font-size: 0.7rem;
            padding: 0.25rem 0.5rem;
        }
        
        .analytics-card {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #28a745;
            animation: pulse 2s infinite;
        }
        
        /* Navbar responsive improvements */
        @media (max-width: 991.98px) {
            .hero-section {
                margin-top: 76px;
                padding: 4rem 0 3rem 0;
            }
            
            .navbar-collapse {
                margin-top: 0.5rem;
                padding: 1rem 0;
                background-color: #f8f9fa;
                border-radius: 8px;
                border: 1px solid #e9ecef;
            }
            
            .navbar-light .navbar-nav .nav-link {
                margin: 0.25rem 0;
            }
            
            .github-star-btn {
                margin-top: 0.5rem;
                justify-content: center;
                width: 100%;
            }
        }
        
        @media (max-width: 576px) {
            .github-star-btn span {
                display: none !important;
            }
            
            .hero-section .btn {
                display: block;
                width: 100%;
                margin: 0.5rem 0 !important;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top shadow-sm">
        <div class="container">
            <a class="navbar-brand fw-bold" href="#home">
                <img src="/public/android-chrome-192x192.png" alt="moleXa Logo" style="width: 48px; height: 48px; margin-right: 10px;">
                moleXa API
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="#overview">Overview</a></li>
                    <li class="nav-item"><a class="nav-link" href="#analytics">Live Analytics</a></li>
                    <li class="nav-item"><a class="nav-link" href="#endpoints">Endpoints</a></li>
                    <li class="nav-item"><a class="nav-link" href="#examples">Examples</a></li>
                    <li class="nav-item"><a class="nav-link" href="#citations">Citations</a></li>
                    <li class="nav-item"><a class="nav-link" href="#license">License</a></li>
                    <li class="nav-item ms-2">
                        <a href="https://github.com/bazarkua/molexa-api" target="_blank" class="btn btn-outline-dark btn-sm github-star-btn">
                            <i class="fab fa-github me-1"></i>
                            <span class="d-none d-md-inline">Star on GitHub</span>
                        </a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="hero-section">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-8">
                    <h1 class="display-4 fw-bold mb-4">
                        <img src="/public/android-chrome-192x192.png" alt="moleXa Logo" style="width: 64px; height: 64px; margin-right: 18px; vertical-align: middle;">
                        moleXa Educational API
                    </h1>
                    <p class="lead mb-4">
                        A comprehensive proxy server providing enhanced access to PubChem's molecular data 
                        with educational context, safety information, and rich annotations for chemistry education.
                    </p>
                    <div class="d-flex flex-wrap gap-3">
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-database me-1"></i>PUG-REST API
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-book me-1"></i>PUG-View Annotations
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-search me-1"></i>Autocomplete
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-shield-alt me-1"></i>Safety Data
                        </span>
                        <span class="badge bg-light text-dark px-3 py-2">
                            <i class="fas fa-chart-line me-1"></i>Live Analytics
                        </span>
                    </div>
                </div>
                <div class="col-lg-4 text-center">
                    <div class="bg-white bg-opacity-10 rounded-3 p-4">
                        <h3>API Status</h3>
                        <div class="d-flex justify-content-center align-items-center">
                            <div class="status-indicator">
                                <div class="status-dot"></div>
                                <span class="badge bg-success fs-6 px-3 py-2">Online</span>
                            </div>
                        </div>
                        <small class="d-block mt-2">Base URL: <code>http://localhost:3001</code></small>
                        <div class="mt-3">
                            <small class="d-block">Total Requests:</small>
                            <strong class="h4" id="heroTotalRequests">Loading...</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Overview Section -->
    <section id="overview" class="py-5">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <h2 class="text-center mb-5">
                        <i class="fas fa-info-circle text-primary me-2"></i>
                        API Overview
                    </h2>
                </div>
            </div>
            <div class="row g-4">
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body">
                            <i class="fas fa-graduation-cap feature-icon mb-3"></i>
                            <h5>Educational Focus</h5>
                            <p class="text-muted">Designed specifically for chemistry education with contextual explanations and safety information.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body">
                            <i class="fas fa-shield-alt feature-icon mb-3"></i>
                            <h5>Safety First</h5>
                            <p class="text-muted">Comprehensive toxicity data, handling procedures, and safety warnings for laboratory use.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body">
                            <i class="fas fa-pills feature-icon mb-3"></i>
                            <h5>Drug Information</h5>
                            <p class="text-muted">Detailed pharmacology data including mechanisms of action and therapeutic uses.</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-lg-3">
                    <div class="card h-100 text-center border-0 shadow-sm">
                        <div class="card-body">
                            <i class="fas fa-rocket feature-icon mb-3"></i>
                            <h5>High Performance</h5>
                            <p class="text-muted">Optimized caching, rate limiting, and error handling for reliable educational applications.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Key Features -->
            <div class="row mt-5">
                <div class="col-12">
                    <h3 class="mb-4">Key Features</h3>
                    <div class="row">
                        <div class="col-lg-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>CORS-enabled for cross-origin requests</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Rate limiting (5 requests/second)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Response caching (24 hours)</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Educational context for molecular properties</li>
                            </ul>
                        </div>
                        <div class="col-lg-6">
                            <ul class="list-unstyled">
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Chemical name autocomplete</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Safety and toxicity information</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Pharmacology and drug data</li>
                                <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Live usage analytics</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Live Analytics Section -->
    <section id="analytics" class="analytics-section">
        <div class="container">
            <div class="row">
                <div class="col-12 text-center mb-5">
                    <h2 class="display-5 fw-bold mb-3">
                        <i class="fas fa-chart-line me-3"></i>
                        Live Educational Impact
                    </h2>
                    <p class="lead">
                        Watch how educators and students around the world use this API for chemistry learning
                    </p>
                </div>
            </div>

            <!-- Stats Row -->
            <div class="row mb-4">
                <div class="col-md-3 mb-3">
                    <div class="card stat-card border-0 text-center h-100">
                        <div class="card-body">
                            <i class="fas fa-globe fa-2x mb-3"></i>
                            <h3 class="mb-0" id="totalRequests">0</h3>
                            <p class="mb-0 opacity-75">Total Requests</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card stat-card border-0 text-center h-100">
                        <div class="card-body">
                            <i class="fas fa-clock fa-2x mb-3"></i>
                            <h3 class="mb-0" id="requestsThisHour">0</h3>
                            <p class="mb-0 opacity-75">This Hour</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card stat-card border-0 text-center h-100">
                        <div class="card-body">
                            <i class="fas fa-graduation-cap fa-2x mb-3"></i>
                            <h3 class="mb-0" id="educationalRequests">0</h3>
                            <p class="mb-0 opacity-75">Learning Requests</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="card stat-card border-0 text-center h-100">
                        <div class="card-body">
                            <i class="fas fa-shield-alt fa-2x mb-3"></i>
                            <h3 class="mb-0" id="safetyRequests">0</h3>
                            <p class="mb-0 opacity-75">Safety Lookups</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <!-- Recent Activity -->
                <div class="col-lg-8 mb-4">
                    <div class="card analytics-card border-0">
                        <div class="card-header bg-white border-0 pb-0">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">
                                    <i class="fas fa-activity text-primary me-2"></i>
                                    Live Request Activity
                                </h5>
                                <div class="status-indicator">
                                    <div class="status-dot"></div>
                                    <small class="text-muted">Live</small>
                                </div>
                            </div>
                        </div>
                        <div class="card-body pt-2">
                            <div class="activity-feed" id="activityFeed">
                                <div class="text-center text-muted">
                                    <i class="fas fa-hourglass-half fa-2x mb-3"></i>
                                    <p>Connecting to live feed...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Usage Insights -->
                <div class="col-lg-4 mb-4">
                    <div class="card analytics-card border-0 h-100">
                        <div class="card-header bg-white border-0">
                            <h5 class="mb-0">
                                <i class="fas fa-chart-pie text-success me-2"></i>
                                Popular Endpoints
                            </h5>
                        </div>
                        <div class="card-body">
                            <div id="topEndpoints">
                                <div class="text-center text-muted">
                                    <i class="fas fa-chart-bar fa-2x mb-3"></i>
                                    <p>Loading usage data...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Educational Impact Showcase -->
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card analytics-card border-0">
                        <div class="card-body">
                            <div class="row text-center">
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <i class="fas fa-flask fa-2x text-primary mb-2"></i>
                                        <h4 class="text-primary" id="propertiesRequests">0</h4>
                                        <small class="text-muted">Properties Explored</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <i class="fas fa-pills fa-2x text-info mb-2"></i>
                                        <h4 class="text-info" id="pharmacologyRequests">0</h4>
                                        <small class="text-muted">Drug Studies</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <i class="fas fa-search fa-2x text-success mb-2"></i>
                                        <h4 class="text-success" id="searchRequests">0</h4>
                                        <small class="text-muted">Structure Searches</small>
                                    </div>
                                </div>
                                <div class="col-md-3">
                                    <div class="mb-3">
                                        <i class="fas fa-image fa-2x text-warning mb-2"></i>
                                        <h4 class="text-warning" id="imageRequests">0</h4>
                                        <small class="text-muted">Visualizations</small>
                                    </div>
                                </div>
                            </div>
                            <div class="text-center mt-3">
                                <p class="text-muted mb-0">
                                    <i class="fas fa-heart text-danger me-1"></i>
                                    Empowering chemistry education worldwide
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Endpoints Section -->
    <section id="endpoints" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-code text-primary me-2"></i>
                API Endpoints
            </h2>

            <!-- Endpoint Categories -->
            <ul class="nav nav-pills justify-content-center mb-4" id="endpointTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="basic-tab" data-bs-toggle="pill" data-bs-target="#basic" type="button">
                        <i class="fas fa-home me-1"></i>Basic
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="educational-tab" data-bs-toggle="pill" data-bs-target="#educational" type="button">
                        <i class="fas fa-graduation-cap me-1"></i>Educational
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="safety-tab" data-bs-toggle="pill" data-bs-target="#safety" type="button">
                        <i class="fas fa-shield-alt me-1"></i>Safety
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="pharmacology-tab" data-bs-toggle="pill" data-bs-target="#pharmacology" type="button">
                        <i class="fas fa-pills me-1"></i>Pharmacology
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="properties-tab" data-bs-toggle="pill" data-bs-target="#properties" type="button">
                        <i class="fas fa-flask me-1"></i>Properties
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="search-tab" data-bs-toggle="pill" data-bs-target="#search" type="button">
                        <i class="fas fa-search me-1"></i>Search
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="endpointTabsContent">
                <!-- Basic Endpoints -->
                <div class="tab-pane fade show active" id="basic" role="tabpanel">
                    <div class="row g-4">
                        <div class="col-lg-6">
                            <div class="card endpoint-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-primary method-badge me-2">GET</span>
                                        Health Check
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /health</code>
                                    </div>
                                    <p class="mt-3">Check API service status and view available features.</p>
                                    <small class="text-muted">Returns server health, timestamp, and cache statistics.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card endpoint-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-success method-badge me-2">GET</span>
                                        Live Analytics
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /analytics</code>
                                    </div>
                                    <p class="mt-3">Get real-time usage statistics and educational impact metrics.</p>
                                    <small class="text-muted">Includes request counts, popular endpoints, and live activity feed.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card endpoint-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-primary method-badge me-2">GET</span>
                                        PubChem Proxy
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /api/pubchem/*</code>
                                    </div>
                                    <p class="mt-3">Direct proxy to PubChem PUG-REST API with enhanced features.</p>
                                    <small class="text-muted">Includes educational context for molecular properties.</small>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card endpoint-card h-100">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-primary method-badge me-2">GET</span>
                                        Structure Images
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /api/pubchem/compound/cid/{cid}/PNG</code>
                                    </div>
                                    <p class="mt-3">Get 2D structure images for molecular visualization.</p>
                                    <small class="text-muted">Supports various image sizes and 3D representations.</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Endpoints -->
                <div class="tab-pane fade" id="educational" role="tabpanel">
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="card endpoint-card">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-success method-badge me-2">GET</span>
                                        Educational Overview
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /api/pubchem/compound/{identifier}/educational?type={cid|name|formula|smiles}</code>
                                    </div>
                                    <p class="mt-3">Get comprehensive educational data for any compound including:</p>
                                    <ul class="mt-2">
                                        <li>Basic molecular properties with educational explanations</li>
                                        <li>Alternative names and synonyms</li>
                                        <li>Structure visualization URLs (2D/3D)</li>
                                        <li>Download links for molecular files</li>
                                        <li>Educational sections available for the compound</li>
                                    </ul>
                                    <div class="property-example">
                                        <strong>Example Response Properties:</strong>
                                        <pre class="mt-2 mb-0"><code>{
  "cid": 2244,
  "basic_properties": {
    "MolecularFormula": "C9H8O4",
    "MolecularWeight": 180.16,
    "XLogP": 1.2,
    "TPSA": 63.6
  },
  "educational_context": {
    "xlogp_info": "XLogP measures lipophilicity. Values between 1-3 are often ideal for drug-like compounds."
  }
}</code></pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Safety Endpoints -->
                <div class="tab-pane fade" id="safety" role="tabpanel">
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="card endpoint-card">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <span class="badge bg-warning method-badge me-2">GET</span>
                                        Safety Information
                                    </h5>
                                    <div class="code-block">
                                        <code>GET /api/pugview/compound/{cid}/safety?heading={heading}</code>
                                    </div>
                                    <p class="mt-3">Access comprehensive safety and hazard information for educational lab safety:</p>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h6>Available Safety Headings:</h6>
                                            <ul class="small">
                                                <li><code>Toxicity</code> - LD50 values and poisoning data</li>
                                                <li><code>Safety and Hazards</code> - General warnings</li>
                                                <li><code>First Aid Measures</code> - Emergency procedures</li>
                                                <li><code>Fire Fighting Measures</code> - Fire safety</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <ul class="small">
                                                <li><code>Handling and Storage</code> - Lab protocols</li>
                                                <li><code>Exposure Controls</code> - PPE requirements</li>
                                                <li><code>GHS Classification</code> - Hazard symbols</li>
                                                <li><code>Accidental Release Measures</code> - Spill cleanup</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="alert alert-warning mt-3" role="alert">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        <strong>Important:</strong> Always consult official safety data sheets (SDS) and follow institutional safety protocols.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Other tabs remain the same... -->
                <div class="tab-pane fade" id="pharmacology" role="tabpanel">
                    <div class="text-center p-5">
                        <i class="fas fa-pills fa-3x text-muted mb-3"></i>
                        <h4>Pharmacology Endpoints</h4>
                        <p class="text-muted">Detailed drug and pharmaceutical information endpoints</p>
                    </div>
                </div>

                <div class="tab-pane fade" id="properties" role="tabpanel">
                    <div class="text-center p-5">
                        <i class="fas fa-flask fa-3x text-muted mb-3"></i>
                        <h4>Properties Endpoints</h4>
                        <p class="text-muted">Physical and chemical property data endpoints</p>
                    </div>
                </div>

                <div class="tab-pane fade" id="search" role="tabpanel">
                    <div class="text-center p-5">
                        <i class="fas fa-search fa-3x text-muted mb-3"></i>
                        <h4>Search Endpoints</h4>
                        <p class="text-muted">Chemical structure and name search endpoints</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Examples Section -->
    <section id="examples" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-code-branch text-primary me-2"></i>
                Usage Examples
            </h2>

            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="card h-100">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0"><i class="fas fa-graduation-cap me-2"></i>Educational Overview</h5>
                        </div>
                        <div class="card-body">
                            <h6>Get comprehensive educational data for aspirin:</h6>
                            <div class="code-block">
                                <code>GET /api/pubchem/compound/aspirin/educational?type=name</code>
                            </div>
                            <div class="mt-3">
                                <strong>JavaScript Example:</strong>
                                <pre class="bg-light p-2 rounded mt-2"><code>const response = await fetch('/api/pubchem/compound/aspirin/educational?type=name');
const data = await response.json();
console.log(`Formula: ${data.basic_properties.MolecularFormula}`);
console.log(`IUPAC: ${data.basic_properties.IUPACName}`);</code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-6">
                    <div class="card h-100">
                        <div class="card-header bg-info text-white">
                            <h5 class="mb-0"><i class="fas fa-chart-line me-2"></i>Live Analytics</h5>
                        </div>
                        <div class="card-body">
                            <h6>Monitor API usage in real-time:</h6>
                            <div class="code-block">
                                <code>GET /analytics/stream</code>
                            </div>
                            <div class="mt-3">
                                <strong>JavaScript Example:</strong>
                                <pre class="bg-light p-2 rounded mt-2"><code>const eventSource = new EventSource('/analytics/stream');
eventSource.onmessage = function(event) {
  const data = JSON.parse(event.data);
  console.log('New request:', data);
};</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Citations Section -->
    <section id="citations" class="py-5 bg-light">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-quote-right text-primary me-2"></i>
                Citations & Attribution
            </h2>

            <div class="row justify-content-center">
                <div class="col-lg-10">
                    <div class="citation-box">
                        <h4 class="mb-3">
                            <i class="fas fa-book me-2"></i>
                            How to Cite This API
                        </h4>
                        <p class="mb-3">
                            When using this educational proxy API in research, publications, or educational materials, 
                            please cite both this software and the underlying PubChem database:
                        </p>
                        
                        <div class="row g-4">
                            <div class="col-md-6">
                                <h5>This API Software:</h5>
                                <div class="bg-white p-3 rounded border">
                                    <strong>APA Format:</strong><br>
                                    Bazarkulov, A. (2025). <em>moleXa API: PubChem Educational Proxy API</em> (Version 2.0.0) [Computer software]. 
                                    GitHub. <a href="https://github.com/bazarkua/molexa-api" target="_blank" style="color: #0066cc; font-weight: 500;">https://github.com/bazarkua/molexa-api</a>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h5>PubChem Database:</h5>
                                <div class="bg-white p-3 rounded border">
                                    <strong>Primary Citation:</strong><br>
                                    Kim, S., Chen, J., Cheng, T., Gindulyte, A., He, J., He, S., Li, Q., Shoemaker, B. A., Thiessen, P. A., Yu, B., Zaslavsky, L., Zhang, J., & Bolton, E. E. (2023). PubChem 2023 update. <em>Nucleic Acids Research</em>, 51(D1), D1373–D1380. <a href="https://doi.org/10.1093/nar/gkac956" target="_blank" style="color: #0066cc; font-weight: 500;">https://doi.org/10.1093/nar/gkac956</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- License Section -->
    <section id="license" class="py-5">
        <div class="container">
            <h2 class="text-center mb-5">
                <i class="fas fa-balance-scale text-primary me-2"></i>
                License & Legal
            </h2>

            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="card border-0 shadow">
                        <div class="card-body p-4">
                            <h4 class="card-title text-center mb-4">
                                <i class="fab fa-osi me-2"></i>
                                MIT License
                            </h4>
                            
                            <div class="bg-light p-3 rounded mb-4">
                                <strong>Copyright © 2025 Adilbek Bazarkulov</strong>
                            </div>

                            <p>
                                Permission is hereby granted, free of charge, to any person obtaining a copy
                                of this software and associated documentation files (the "Software"), to deal
                                in the Software without restriction, including without limitation the rights
                                to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
                                copies of the Software.
                            </p>

                            <div class="text-center mt-4">
                                <a href="https://opensource.org/licenses/MIT" target="_blank" class="btn btn-outline-primary" style="border-color: #0066cc; color: #0066cc;">
                                    <i class="fas fa-external-link-alt me-2"></i>
                                    View Full MIT License
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <h5>
                        <img src="/public/android-chrome-192x192.png" alt="moleXa Logo" style="width: 48px; height: 48px; margin-right: 10px; vertical-align: middle;">
                        moleXa Educational Proxy
                    </h5>
                    <p class="text-light">
                        Empowering chemistry education through enhanced access to molecular data with 
                        safety information, educational context, and comprehensive analytics.
                    </p>
                </div>
                <div class="col-lg-3">
                    <h6>Quick Links</h6>
                    <ul class="list-unstyled">
                        <li><a href="#overview">Overview</a></li>
                        <li><a href="#analytics">Live Analytics</a></li>
                        <li><a href="#endpoints">API Endpoints</a></li>
                        <li><a href="#examples">Examples</a></li>
                    </ul>
                </div>
                <div class="col-lg-3">
                    <h6>Resources</h6>
                    <ul class="list-unstyled">
                        <li><a href="https://pubchem.ncbi.nlm.nih.gov" target="_blank">PubChem Database</a></li>
                        <li><a href="https://pubchem.ncbi.nlm.nih.gov/docs/pug-rest" target="_blank">PUG-REST Docs</a></li>
                        <li><a href="https://github.com/bazarkua/molexa-api" target="_blank">GitHub Repository</a></li>
                    </ul>
                </div>
            </div>
            <hr class="text-light">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <p class="mb-0 text-light">
                        &copy; 2025 Adilbek Bazarkulov. Licensed under MIT License.
                    </p>
                </div>
                <div class="col-md-6 text-md-end">
                    <p class="mb-0 text-light">
                        Built for educational purposes with <i class="fas fa-heart" style="color: #ff69b4;"></i>
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    
    <!-- Live Analytics JavaScript -->
    <script>
        // Global analytics state
        let analyticsData = {
            totalRequests: 0,
            recentRequests: [],
            educationalRequests: 0,
            safetyRequests: 0,
            propertiesRequests: 0,
            pharmacologyRequests: 0,
            searchRequests: 0,
            imageRequests: 0
        };
        
        // Connect to SSE stream for real-time updates
        const eventSource = new EventSource('/analytics/stream');
        
        eventSource.onopen = function() {
            console.log('✅ Connected to analytics stream');
            updateConnectionStatus(true);
        };
        
        eventSource.onmessage = function(event) {
            try {
                const data = JSON.parse(event.data);
                
                if (data.type === 'initial') {
                    updateAnalytics(data.analytics);
                    updateRecentRequests(data.recentRequests);
                } else if (data.type === 'new_request') {
                    addNewRequest(data.data);
                    updateAnalytics(data.analytics);
                }
            } catch (error) {
                console.error('Error parsing analytics data:', error);
            }
        };
        
        eventSource.onerror = function(event) {
            console.log('❌ Analytics stream disconnected');
            updateConnectionStatus(false);
            
            // Try to reconnect after 5 seconds
            setTimeout(() => {
                console.log('🔄 Attempting to reconnect...');
            }, 5000);
        };
        
        function updateConnectionStatus(connected) {
            const statusElements = document.querySelectorAll('.status-dot');
            statusElements.forEach(dot => {
                if (connected) {
                    dot.style.backgroundColor = '#28a745';
                    dot.style.animation = 'pulse 2s infinite';
                } else {
                    dot.style.backgroundColor = '#dc3545';
                    dot.style.animation = 'none';
                }
            });
        }
        
        function updateAnalytics(analytics) {
            analyticsData.totalRequests = analytics.totalRequests;
            
            // Update main stats
            document.getElementById('totalRequests').textContent = analytics.totalRequests;
            document.getElementById('heroTotalRequests').textContent = analytics.totalRequests;
            document.getElementById('requestsThisHour').textContent = analytics.requestsThisHour || 0;
            
            // Update educational impact metrics
            updateEducationalMetrics();
            
            // Update top endpoints
            if (analytics.topEndpoints) {
                updateTopEndpoints(analytics.topEndpoints);
            }
        }
        
        function updateEducationalMetrics() {
            const safetyCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('safety') || 
                r.endpoint.includes('safety')).length;
                
            const educationalCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('educational') || 
                r.endpoint.includes('educational')).length;
                
            const propertiesCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('properties') || 
                r.endpoint.includes('properties')).length;
                
            const pharmacologyCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('pharmacology') || 
                r.endpoint.includes('pharmacology')).length;
                
            const searchCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('search') || 
                r.type.toLowerCase().includes('autocomplete')).length;
                
            const imageCount = analyticsData.recentRequests.filter(r => 
                r.type.toLowerCase().includes('image') || 
                r.endpoint.includes('.PNG')).length;
            
            document.getElementById('safetyRequests').textContent = safetyCount;
            document.getElementById('educationalRequests').textContent = educationalCount;
            document.getElementById('propertiesRequests').textContent = propertiesCount;
            document.getElementById('pharmacologyRequests').textContent = pharmacologyCount;
            document.getElementById('searchRequests').textContent = searchCount;
            document.getElementById('imageRequests').textContent = imageCount;
        }
        
        function updateTopEndpoints(topEndpoints) {
            const container = document.getElementById('topEndpoints');
            if (!topEndpoints || topEndpoints.length === 0) {
                container.innerHTML = '<div class="text-center text-muted"><p>No data yet</p></div>';
                return;
            }
            
            container.innerHTML = topEndpoints.map(([endpoint, count]) => `
                <div class="d-flex justify-content-between align-items-center mb-2">
                    <span class="text-truncate small">${endpoint}</span>
                    <span class="badge bg-primary">${count}</span>
                </div>
            `).join('');
        }
        
        function addNewRequest(request) {
            analyticsData.recentRequests.unshift(request);
            
            // Keep only last 20 requests
            if (analyticsData.recentRequests.length > 20) {
                analyticsData.recentRequests = analyticsData.recentRequests.slice(0, 20);
            }
            
            const feed = document.getElementById('activityFeed');
            const requestElement = createRequestElement(request, true);
            
            // Clear placeholder if it exists
            if (feed.children.length === 0 || feed.children[0].classList.contains('text-center')) {
                feed.innerHTML = '';
            }
            
            feed.insertBefore(requestElement, feed.firstChild);
            
            // Add pulse animation for new requests
            requestElement.classList.add('pulse');
            setTimeout(() => requestElement.classList.remove('pulse'), 2000);
            
            // Remove old requests (keep only 10 visible)
            const children = Array.from(feed.children);
            if (children.length > 10) {
                children.slice(10).forEach(child => child.remove());
            }
            
            // Update educational metrics
            updateEducationalMetrics();
        }
        
        function updateRecentRequests(requests) {
            analyticsData.recentRequests = requests || [];
            const feed = document.getElementById('activityFeed');
            
            if (requests.length === 0) {
                feed.innerHTML = `
                    <div class="text-center text-muted">
                        <i class="fas fa-hourglass-half fa-2x mb-3"></i>
                        <p>Waiting for API requests...</p>
                    </div>
                `;
                return;
            }
            
            feed.innerHTML = requests.slice(0, 10).map(request => 
                createRequestElement(request).outerHTML
            ).join('');
            
            updateEducationalMetrics();
        }
        
        function createRequestElement(request, isNew = false) {
            const div = document.createElement('div');
            div.className = `recent-request ${isNew ? 'new' : ''}`;
            
            const timeAgo = new Date(request.timestamp).toLocaleTimeString();
            const typeColor = getTypeColor(request.type);
            
            div.innerHTML = `
                <div class="d-flex justify-content-between align-items-start">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center mb-1">
                            <span class="badge ${typeColor} badge-request-type me-2">${request.type}</span>
                            <small class="text-muted">${timeAgo}</small>
                        </div>
                        <div class="small text-truncate" style="max-width: 300px;">
                            <span class="badge bg-secondary me-1">${request.method}</span>
                            ${request.endpoint}
                        </div>
                    </div>
                    <i class="fas fa-globe text-muted"></i>
                </div>
            `;
            
            return div;
        }
        
        function getTypeColor(type) {
            const colors = {
                'Educational Overview': 'bg-primary',
                'Safety Data': 'bg-warning text-dark',
                'Pharmacology': 'bg-info',
                'Properties': 'bg-secondary',
                'Autocomplete': 'bg-success',
                'Educational Annotations': 'bg-purple',
                'Name Search': 'bg-primary',
                'Structure Image': 'bg-info',
                'Structure File': 'bg-secondary'
            };
            return colors[type] || 'bg-light text-dark';
        }
        
        // Initialize analytics on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Initial load of analytics data
            fetch('/analytics')
                .then(response => response.json())
                .then(data => {
                    updateAnalytics(data);
                    updateRecentRequests(data.recentRequests);
                })
                .catch(error => {
                    console.error('Error loading initial analytics:', error);
                });
        });
        
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Update active nav link on scroll
        window.addEventListener('scroll', function() {
            let current = '';
            const sections = document.querySelectorAll('section[id]');
            
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (pageYOffset >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>